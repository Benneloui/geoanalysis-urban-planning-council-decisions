# --------------------------------------------------------------------------
# Project Metadata
# --------------------------------------------------------------------------
project:
  name: "OParl Data Pipeline"
  description: "Extract, enrich, and convert OParl data to Parquet/RDF"
  version: "0.1"
  city: "augsburg"  # Default city (overridable via CLI/environment)

# --------------------------------------------------------------------------
# OParl API Settings
# --------------------------------------------------------------------------
oparl:
  # Available OParl system endpoints (city-specific)
  endpoints:
    augsburg: "www.augsburg.sitzung-online.de/public/oparl/system"
   or https://www.augsburg.sitzung-online.de/public/oparl/system
  # Filter for fetching data modified after this date (ISO 8601 format)
  start_date: "2023-01-01T00:00:00Z"
  end_date: "2025-12-31T23:59:59Z"
  # Pagination and performance settings
  max_pages_meetings: 50
  max_pages_agenda: 20
  # Network settings
  http_timeout_sec: 40
  retry_attempts: 5
  retry_pause_sec: 2
  # City-specific parameters
  body_id: "123"  # ID of the municipal body (e.g., city council)


# --------------------------------------------------------------------------
# Directory Paths
# --------------------------------------------------------------------------
paths:
  raw: "data-raw/council_meetings"    # Raw API downloads (PDFs/JSON)
  processed: "data/processed"        # Base directory for processed data
  logs: "logs"                       # Log files
  output:
    parquet_dir: "${processed}/council_data.parquet"  # Partitioned Parquet output
    rdf_nt_file: "${processed}/metadata.nt"           # Append-only N-Triples
    state_db: "${processed}/pipeline_state.db"       # SQLite state tracking

# --------------------------------------------------------------------------
# Processing Settings
# --------------------------------------------------------------------------
processing:
  parquet:
    partition_cols: ["city", "year"]  # Partition Parquet by city/year
    compression: "snappy"             # Compression for Parquet files
  rdf:
    final_format: "turtle"            # Convert N-Triples to Turtle at the end
    namespaces:                       # RDF namespaces
      oparl: "http://example.org/oparl/"
      geo: "http://www.opengis.net/ont/geosparql#"
      dct: "http://purl.org/dc/terms/"
    class_mapping:
      meeting: "Meeting"
      agenda_item: "AgendaItem"
      document: "Document"
    predicates:
      has_agenda_item: "hasAgendaItem"
      content: "content"
      date: "date"
      relates_to_area: "relatesToArea"
    graphdb_endpoint: null            # Optional: GraphDB SPARQL endpoint URL

# --------------------------------------------------------------------------
# Enrichment (Optional)
# --------------------------------------------------------------------------
enrichment:
  ner_model: null                     # Path to NER model (e.g., spaCy)
  geo_mapping:                        # Mapping of districts to Geo IDs
    "Innenstadt": "http://sws.geonames.org/2661763/"
    "LÃ¤nggasse": "http://sws.geonames.org/1234567/"

# --------------------------------------------------------------------------
# SPARQL Endpoint (for queries)
# --------------------------------------------------------------------------
sparql:
  endpoint: "http://localhost:7200/repositories/oparl"  # GraphDB/Oxigraph
  auth:
    username: null                    # Credentials if needed
    password: null

# --------------------------------------------------------------------------
# Test Script Settings
# --------------------------------------------------------------------------
testing:
  sample_size: 20                     # Number of papers to process in tests
